<Window
  x:Class="LinkerPlayer.Windows.PropertiesWindow"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:conv="clr-namespace:LinkerPlayer.Converters"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:local="clr-namespace:LinkerPlayer.Windows"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  Title="PropertiesWindow"
  Width="800"
  Height="450"
  mc:Ignorable="d">
  <DockPanel>
    <StackPanel
      Margin="10,10,10,10"
      HorizontalAlignment="Right"
      DockPanel.Dock="Bottom"
      Orientation="Horizontal">
      <Button
        Width="75"
        Margin="0,0,5,0"
        Command="{Binding SaveCommand}"
        Content="Save" />
      <Button
        Width="75"
        Command="{Binding CancelCommand}"
        Content="Cancel" />
    </StackPanel>
    <ScrollViewer
      x:Name="WindowScrollViewer"
      HorizontalScrollBarVisibility="Disabled"
      VerticalScrollBarVisibility="Auto">
      <Grid Margin="10">
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto" />
          <RowDefinition Height="Auto" />
          <RowDefinition Height="Auto" />
          <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <TextBlock
          Margin="0,0,0,5"
          FontWeight="Bold"
          Text="Metadata" />
        <DataGrid
          Grid.Row="1"
          Height="Auto"
          MinWidth="400"
          MaxHeight="Infinity"
          Margin="0,0,0,10"
          AutoGenerateColumns="False"
          CanUserAddRows="False"
          CanUserResizeRows="False"
          ItemsSource="{Binding MetadataItems}"
          PreviewMouseWheel="DataGrid_PreviewMouseWheel"
          VerticalScrollBarVisibility="Disabled">
          <DataGrid.Columns>
            <DataGridTextColumn
              Width="200"
              MinWidth="100"
              Binding="{Binding Name}"
              CanUserResize="True"
              Header="Name"
              IsReadOnly="True" />
            <DataGridTemplateColumn
              Width="*"
              MinWidth="100"
              CanUserResize="True"
              Header="Value">
              <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                  <TextBlock IsEnabled="{Binding IsEditable}" Text="{Binding Value}" />
                </DataTemplate>
              </DataGridTemplateColumn.CellTemplate>
              <DataGridTemplateColumn.CellEditingTemplate>
                <DataTemplate>
                  <TextBox IsEnabled="{Binding IsEditable}" Text="{Binding Value, UpdateSourceTrigger=PropertyChanged}" />
                </DataTemplate>
              </DataGridTemplateColumn.CellEditingTemplate>
            </DataGridTemplateColumn>
          </DataGrid.Columns>
        </DataGrid>
        <TextBlock
          Grid.Row="2"
          Margin="0,0,0,5"
          FontWeight="Bold"
          Text="Properties" />
        <DataGrid
          Grid.Row="3"
          Height="Auto"
          MinWidth="400"
          MaxHeight="Infinity"
          AutoGenerateColumns="False"
          CanUserAddRows="False"
          CanUserResizeRows="False"
          ItemsSource="{Binding PropertyItems}"
          PreviewMouseWheel="DataGrid_PreviewMouseWheel"
          VerticalScrollBarVisibility="Disabled">
          <DataGrid.Columns>
            <DataGridTextColumn
              Width="200"
              MinWidth="100"
              Binding="{Binding Name}"
              CanUserResize="True"
              Header="Name"
              IsReadOnly="True" />
            <DataGridTextColumn
              Width="*"
              MinWidth="100"
              Binding="{Binding Value}"
              CanUserResize="True"
              Header="Value"
              IsReadOnly="True" />
          </DataGrid.Columns>
        </DataGrid>
      </Grid>
    </ScrollViewer>
  </DockPanel>
</Window>