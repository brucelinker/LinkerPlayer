<Window
  x:Class="LinkerPlayer.Windows.EqualizerWindow"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:local="clr-namespace:LinkerPlayer.Windows"
  xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:userControls="clr-namespace:LinkerPlayer.UserControls"
  Title="Equalizer"
  Width="500"
  Height="351"
  MinWidth="500"
  MinHeight="250"
  AllowsTransparency="True"
  Loaded="Window_Loaded"
  StateChanged="Window_StateChanged"
  WindowStyle="None"
  mc:Ignorable="d">

  <Window.Resources>
    <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="pack://application:,,,/LinkerPlayer;component/Styles/EqVerticalSlider.xaml" />
      </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
  </Window.Resources>

  <WindowChrome.WindowChrome>
    <WindowChrome CaptionHeight="25" />
  </WindowChrome.WindowChrome>

  <Grid>
    <Grid.Resources>
      <Style x:Key="TextBlockFontStyle" TargetType="TextBlock">
        <Setter Property="FontFamily" Value="/Fonts/#Montserrat" />
        <Setter Property="Foreground" Value="#BDBDBD" />
      </Style>
    </Grid.Resources>

    <Grid.Background>
      <SolidColorBrush Color="#212128" />
    </Grid.Background>

    <Grid.RowDefinitions>
      <RowDefinition Height="80" />
      <RowDefinition />
      <RowDefinition Height="20" />
      <RowDefinition Height="50" />
    </Grid.RowDefinitions>

    <userControls:TitlebarButtons x:Name="TitlebarButtons" Panel.ZIndex="1" />

    <Grid Grid.Row="0">
      <Grid.Resources>
        <Style TargetType="Button">
          <Setter Property="Background" Value="Transparent" />
          <Setter Property="Height" Value="25" />
          <Setter Property="Width" Value="25" />
        </Style>
      </Grid.Resources>

      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="130" />
        <ColumnDefinition Width="*" />
      </Grid.ColumnDefinitions>

      <ComboBox
        Name="Profiles"
        Grid.Column="1"
        Width="120"
        Padding="5"
        materialDesign:HintAssist.Hint="Default"
        Background="Transparent"
        BorderBrush="{DynamicResource PrimaryHueMidBrush}"
        FontFamily="/Fonts/#Montserrat"
        Foreground="#BDBDBD"
        IsTextSearchEnabled="false"
        SelectionChanged="Profiles_SelectionChanged"
        ToolTip="Profiles">
        <ComboBox.Resources>
          <SolidColorBrush x:Key="MaterialDesignPaper" Color="#212128" />
        </ComboBox.Resources>
      </ComboBox>

      <Grid x:Name="ControlButtons" Grid.Column="2">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="30" />
          <ColumnDefinition Width="30" />
          <ColumnDefinition Width="30" />
          <ColumnDefinition Width="30" />
        </Grid.ColumnDefinitions>

        <Button
          Name="SaveButton"
          Grid.Column="0"
          Click="SaveButton_Click"
          ToolTip="Save">
          <materialDesign:PackIcon Foreground="White" Kind="ContentSave" />
        </Button>

        <Button
          Name="DeleteButton"
          Grid.Column="1"
          Click="DeleteButton_Click"
          ToolTip="Delete">
          <materialDesign:PackIcon
            Foreground="IndianRed"
            Kind="Plus"
            RenderTransformOrigin=".5, .5">
            <materialDesign:PackIcon.RenderTransform>
              <RotateTransform Angle="45" />
            </materialDesign:PackIcon.RenderTransform>
          </materialDesign:PackIcon>
        </Button>

        <Popup
          x:Name="ReNamePopup"
          Width="150"
          HorizontalOffset="0"
          Placement="Bottom"
          PlacementTarget="{Binding ElementName=RenameButton}"
          StaysOpen="False"
          VerticalOffset="15">
          <Border Padding="15" Background="#393946">
            <TextBox
              Name="ReNamePopupTextBox"
              FontFamily="/Fonts/#Montserrat"
              FontSize="14"
              FontWeight="DemiBold"
              Foreground="#BDBDBD"
              KeyDown="ReNamePopupTextBox_KeyDown" />
          </Border>
        </Popup>
        <Button
          Name="RenameButton"
          Grid.Column="2"
          Click="RenameButton_Click"
          ToolTip="Change">
          <materialDesign:PackIcon Foreground="White" Kind="PencilOutline" />
        </Button>

        <Popup
          x:Name="NamePopup"
          Width="150"
          HorizontalOffset="0"
          Placement="Bottom"
          PlacementTarget="{Binding ElementName=NameButton}"
          StaysOpen="False"
          VerticalOffset="15">
          <Border Padding="15" Background="#393946">
            <TextBox
              Name="NamePopupTextBox"
              FontFamily="/Fonts/#Montserrat"
              FontSize="14"
              FontWeight="DemiBold"
              Foreground="#BDBDBD"
              KeyDown="NamePopupTextBox_KeyDown" />
          </Border>
        </Popup>
        <Button
          Name="NameButton"
          Grid.Column="3"
          Click="AddButton_Click"
          ToolTip="Add">
          <materialDesign:PackIcon Foreground="White" Kind="Plus" />
        </Button>
      </Grid>
    </Grid>

    <Grid Grid.Row="1">
      <Grid.Resources>
        <Style BasedOn="{StaticResource TextBlockFontStyle}" TargetType="TextBlock">
          <Setter Property="HorizontalAlignment" Value="Right" />
        </Style>
      </Grid.Resources>

      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="55" />
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="35" />
      </Grid.ColumnDefinitions>

      <Grid>
        <Grid.RowDefinitions>
          <RowDefinition Height="20" />
          <RowDefinition Height="*" MinHeight="10" />
          <RowDefinition Height="20" />
        </Grid.RowDefinitions>

        <TextBlock
          Grid.Row="0"
          VerticalAlignment="Top"
          Text="30 dB" />
        <TextBlock
          Grid.Row="1"
          VerticalAlignment="Center"
          Text="0 dB" />
        <TextBlock
          Grid.Row="2"
          VerticalAlignment="Bottom"
          Text="-30 dB" />
      </Grid>

      <!-- EQ Sliders - Initialized in Window_Loaded -->
      <Grid Name="EqGrid" Grid.Column="1"/>

    </Grid>

    <Grid Grid.Row="2" Margin="30,0,30,0">
      <Grid.Resources>
        <Style BasedOn="{StaticResource TextBlockFontStyle}" TargetType="TextBlock">
          <Setter Property="HorizontalAlignment" Value="Center" />
          <Setter Property="VerticalAlignment" Value="Bottom" />
        </Style>
      </Grid.Resources>

      <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition />
        <ColumnDefinition />
        <ColumnDefinition />
        <ColumnDefinition />
        <ColumnDefinition />
        <ColumnDefinition />
        <ColumnDefinition />
      </Grid.ColumnDefinitions>

      <TextBlock Grid.Column="0" Text="40 Hz" />
      <TextBlock Grid.Column="1" Text="80 Hz" />
      <TextBlock Grid.Column="2" Text="320 Hz" />
      <TextBlock Grid.Column="3" Text="640 Hz" />
      <TextBlock Grid.Column="4" Text="1280 Hz" />
      <TextBlock Grid.Column="5" Text="2560 Hz" />
      <TextBlock Grid.Column="6" Text="5120 Hz" />
      <TextBlock Grid.Column="7" Text="10240 Hz" />
    </Grid>

    <Grid Grid.Row="3">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="120" />
        <ColumnDefinition Width="*" />
      </Grid.ColumnDefinitions>

      <Button
        Name="StartStopButton"
        Grid.Column="1"
        Width="100"
        Height="30"
        HorizontalAlignment="Center"
        Background="Transparent"
        Click="StartStopButton_Click">
        <TextBlock
          Name="StartStopText"
          HorizontalAlignment="Center"
          VerticalAlignment="Center"
          FontFamily="/Fonts/#Montserrat"
          Foreground="#BDBDBD"
          Text="Start" />
      </Button>

      <Button
        Name="ReloadButton"
        Grid.Column="2"
        Width="25"
        Height="25"
        HorizontalAlignment="Left"
        Background="Transparent"
        Click="ReloadButton_Click"
        ToolTip="Reset bands">
        <Button.Triggers>
          <EventTrigger RoutedEvent="Button.Click">
            <EventTrigger.Actions>
              <BeginStoryboard>
                <Storyboard>
                  <DoubleAnimation
                    Storyboard.TargetName="RotateAnim"
                    Storyboard.TargetProperty="(RotateTransform.Angle)"
                    From="0"
                    To="360"
                    Duration="0:0:1" />
                </Storyboard>
              </BeginStoryboard>
            </EventTrigger.Actions>
          </EventTrigger>
        </Button.Triggers>

        <Image
          Width="15"
          RenderOptions.BitmapScalingMode="HighQuality"
          RenderTransformOrigin="0.5,0.5"
          Source="/Images/reload.png">
          <Image.RenderTransform>
            <RotateTransform x:Name="RotateAnim" Angle="0" />
          </Image.RenderTransform>
        </Image>
      </Button>
    </Grid>
  </Grid>
</Window>
